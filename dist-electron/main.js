"use strict";const e=require("electron"),i=require("node:path"),r={CHANNEL_ADJUST_WIN:"c_adjust_win",CHANNEL_CREATE_BACKEND_WIN:"c_create_backend_win",KEY_CREATE_BACKEND_WIN_PARAMS:"k_create_backend_win_params"},_=()=>{e.ipcMain.on(r.CHANNEL_ADJUST_WIN,(a,o)=>{const s=e.BrowserWindow.getFocusedWindow();if(s!=null)switch(o){case"min":s.minimize();break;case"max":s.isMaximized()?s.unmaximize():s.maximize();break;case"close":s.destroy(),e.app.quit();break}}),e.ipcMain.on(r.CHANNEL_CREATE_BACKEND_WIN,()=>{const a=new e.BrowserWindow({width:900,height:600,webPreferences:{preload:i.join(__dirname,"preload.js")}});let o="";process.env.VITE_DEV_SERVER_URL?o=process.env.VITE_DEV_SERVER_URL+"#/backendPage":o=i.join(process.env.DIST,"index.html#backendPage"),a.loadURL(o)})};process.env.DIST=i.join(__dirname,"../dist");process.env.PUBLIC=e.app.isPackaged?process.env.DIST:i.join(process.env.DIST,"../public");let n;const c=process.env.VITE_DEV_SERVER_URL;function t(){n=new e.BrowserWindow({width:900,height:600,frame:!1,webPreferences:{preload:i.join(__dirname,"preload.js")}}),n.webContents.on("did-finish-load",()=>{n==null||n.webContents.send("main-process-message",new Date().toLocaleString())}),n.on("closed",()=>{e.BrowserWindow.getAllWindows().forEach(a=>a.close())}),c?n.loadURL(c):n.loadFile(i.join(process.env.DIST,"index.html"))}e.app.on("window-all-closed",()=>{n=null});e.app.whenReady().then(()=>{_(),t()});
